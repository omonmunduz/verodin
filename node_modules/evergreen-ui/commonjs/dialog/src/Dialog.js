"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf3 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _glamor = require("glamor");

var _react = _interopRequireDefault(require("react"));

var _propTypes = _interopRequireDefault(require("prop-types"));

var _layers = require("../../layers");

var _typography = require("../../typography");

var _overlay = require("../../overlay");

var _buttons = require("../../buttons");

var _theme = require("../../theme");

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2["default"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

var animationEasing = {
  deceleration: "cubic-bezier(0.0, 0.0, 0.2, 1)",
  acceleration: "cubic-bezier(0.4, 0.0, 1, 1)"
};
var ANIMATION_DURATION = 200;

var openAnimation = _glamor.css.keyframes('openAnimation', {
  from: {
    transform: 'scale(0.8)',
    opacity: 0
  },
  to: {
    transform: 'scale(1)',
    opacity: 1
  }
});

var closeAnimation = _glamor.css.keyframes('closeAnimation', {
  from: {
    transform: 'scale(1)',
    opacity: 1
  },
  to: {
    transform: 'scale(0.8)',
    opacity: 0
  }
});

var animationStyles = {
  '&[data-state="entering"], &[data-state="entered"]': {
    animation: "".concat(openAnimation, " ").concat(ANIMATION_DURATION, "ms ").concat(animationEasing.deceleration, " both")
  },
  '&[data-state="exiting"]': {
    animation: "".concat(closeAnimation, " ").concat(ANIMATION_DURATION, "ms ").concat(animationEasing.acceleration, " both")
  }
};

var Dialog =
/*#__PURE__*/
function (_React$Component) {
  (0, _inherits2["default"])(Dialog, _React$Component);

  function Dialog() {
    var _getPrototypeOf2;

    var _this;

    (0, _classCallCheck2["default"])(this, Dialog);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = (0, _possibleConstructorReturn2["default"])(this, (_getPrototypeOf2 = (0, _getPrototypeOf3["default"])(Dialog)).call.apply(_getPrototypeOf2, [this].concat(args)));
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "renderChildren", function (close) {
      var children = _this.props.children;

      if (typeof children === 'function') {
        return children({
          close: close
        });
      }

      if (typeof children === 'string') {
        return _react["default"].createElement(_typography.Paragraph, null, children);
      }

      return children;
    });
    return _this;
  }

  (0, _createClass2["default"])(Dialog, [{
    key: "render",
    value: function render() {
      var _this2 = this;

      var _this$props = this.props,
          title = _this$props.title,
          width = _this$props.width,
          intent = _this$props.intent,
          isShown = _this$props.isShown,
          topOffset = _this$props.topOffset,
          sideOffset = _this$props.sideOffset,
          hasHeader = _this$props.hasHeader,
          header = _this$props.header,
          hasClose = _this$props.hasClose,
          hasFooter = _this$props.hasFooter,
          footer = _this$props.footer,
          hasCancel = _this$props.hasCancel,
          onCloseComplete = _this$props.onCloseComplete,
          onOpenComplete = _this$props.onOpenComplete,
          onCancel = _this$props.onCancel,
          onConfirm = _this$props.onConfirm,
          confirmLabel = _this$props.confirmLabel,
          isConfirmLoading = _this$props.isConfirmLoading,
          isConfirmDisabled = _this$props.isConfirmDisabled,
          cancelLabel = _this$props.cancelLabel,
          shouldCloseOnOverlayClick = _this$props.shouldCloseOnOverlayClick,
          shouldCloseOnEscapePress = _this$props.shouldCloseOnEscapePress,
          _this$props$container = _this$props.containerProps,
          containerProps = _this$props$container === void 0 ? {} : _this$props$container,
          contentContainerProps = _this$props.contentContainerProps,
          minHeightContent = _this$props.minHeightContent,
          preventBodyScrolling = _this$props.preventBodyScrolling,
          overlayProps = _this$props.overlayProps;
      var sideOffsetWithUnit = Number.isInteger(sideOffset) ? "".concat(sideOffset, "px") : sideOffset;
      var maxWidth = "calc(100% - ".concat(sideOffsetWithUnit, " * 2)");
      var topOffsetWithUnit = Number.isInteger(topOffset) ? "".concat(topOffset, "px") : topOffset;
      var maxHeight = "calc(100% - ".concat(topOffsetWithUnit, " * 2)");

      var renderHeader = function renderHeader(close) {
        if (!header && !hasHeader) {
          return undefined;
        }

        return _react["default"].createElement(_layers.Pane, {
          padding: 16,
          flexShrink: 0,
          borderBottom: "muted",
          display: "flex",
          alignItems: "center"
        }, header || _react["default"].createElement(_react["default"].Fragment, null, _react["default"].createElement(_typography.Heading, {
          is: "h4",
          size: 600,
          flex: "1"
        }, title), hasClose && _react["default"].createElement(_buttons.IconButton, {
          appearance: "minimal",
          icon: "cross",
          onClick: function onClick() {
            return onCancel(close);
          }
        })));
      };

      var renderFooter = function renderFooter(close) {
        if (!footer && !hasFooter) {
          return undefined;
        }

        return _react["default"].createElement(_layers.Pane, {
          borderTop: "muted",
          clearfix: true
        }, _react["default"].createElement(_layers.Pane, {
          padding: 16,
          "float": "right"
        }, footer || _react["default"].createElement(_react["default"].Fragment, null, hasCancel && _react["default"].createElement(_buttons.Button, {
          tabIndex: 0,
          onClick: function onClick() {
            return onCancel(close);
          }
        }, cancelLabel), _react["default"].createElement(_buttons.Button, {
          tabIndex: 0,
          marginLeft: 8,
          appearance: "primary",
          isLoading: isConfirmLoading,
          disabled: isConfirmDisabled,
          onClick: function onClick() {
            return onConfirm(close);
          },
          intent: intent
        }, confirmLabel))));
      };

      return _react["default"].createElement(_overlay.Overlay, {
        isShown: isShown,
        shouldCloseOnClick: shouldCloseOnOverlayClick,
        shouldCloseOnEscapePress: shouldCloseOnEscapePress,
        onExited: onCloseComplete,
        onEntered: onOpenComplete,
        containerProps: _objectSpread({
          display: 'flex',
          alignItems: 'flex-start',
          justifyContent: 'center'
        }, overlayProps),
        preventBodyScrolling: preventBodyScrolling
      }, function (_ref) {
        var state = _ref.state,
            close = _ref.close;
        return _react["default"].createElement(_layers.Pane, (0, _extends2["default"])({
          role: "dialog",
          backgroundColor: "white",
          elevation: 4,
          borderRadius: 8,
          width: width,
          maxWidth: maxWidth,
          maxHeight: maxHeight,
          marginX: sideOffsetWithUnit,
          marginY: topOffsetWithUnit,
          display: "flex",
          flexDirection: "column",
          css: animationStyles,
          "data-state": state
        }, containerProps), renderHeader(close), _react["default"].createElement(_layers.Pane, (0, _extends2["default"])({
          "data-state": state,
          display: "flex",
          overflow: "auto",
          padding: 16,
          flexDirection: "column",
          minHeight: minHeightContent
        }, contentContainerProps), _react["default"].createElement(_layers.Pane, null, _this2.renderChildren(close))), renderFooter(close));
      });
    }
  }]);
  return Dialog;
}(_react["default"].Component);

Dialog.displayName = "Dialog";
(0, _defineProperty2["default"])(Dialog, "propTypes", {
  /**
   * Children can be a string, node or a function accepting `({ close })`.
   * When passing a string, <Paragraph /> is used to wrap the string.
   */
  children: _propTypes["default"].oneOfType([_propTypes["default"].node, _propTypes["default"].func]).isRequired,

  /**
   * The intent of the Dialog. Used for the button.
   */
  intent: _propTypes["default"].oneOf(['none', 'success', 'warning', 'danger']).isRequired,

  /**
   * When true, the dialog is shown.
   */
  isShown: _propTypes["default"].bool,

  /**
   * Title of the Dialog. Titles should use Title Case.
   */
  title: _propTypes["default"].node,

  /**
   * When true, the header with the title and close icon button is shown.
   */
  hasHeader: _propTypes["default"].bool,

  /**
   * A custom header to render at the top of the Dialog. If set, this
   * takes precedence over the default header.
   */
  header: _propTypes["default"].element,

  /**
   * When true, the footer with the cancel and confirm button is shown.
   */
  hasFooter: _propTypes["default"].bool,

  /**
   * A custom footer to render at the bottom of the Dialog. If set, this
   * takes precedence over the default footer.
   */
  footer: _propTypes["default"].element,

  /**
   * When true, the cancel button is shown.
   */
  hasCancel: _propTypes["default"].bool,

  /**
   * When true, the close button is shown
   */
  hasClose: _propTypes["default"].bool,

  /**
   * Function that will be called when the exit transition is complete.
   */
  onCloseComplete: _propTypes["default"].func,

  /**
   * Function that will be called when the enter transition is complete.
   */
  onOpenComplete: _propTypes["default"].func,

  /**
   * Function that will be called when the confirm button is clicked.
   * This does not close the Dialog. A close function will be passed
   * as a paramater you can use to close the dialog.
   *
   * `onConfirm={(close) => close()}`
   */
  onConfirm: _propTypes["default"].func,

  /**
   * Label of the confirm button.
   */
  confirmLabel: _propTypes["default"].string,

  /**
   * When true, the confirm button is set to loading.
   */
  isConfirmLoading: _propTypes["default"].bool,

  /**
   * When true, the confirm button is set to disabled.
   */
  isConfirmDisabled: _propTypes["default"].bool,

  /**
   * Function that will be called when the cancel button is clicked.
   * This closes the Dialog by default.
   *
   * `onCancel={(close) => close()}`
   */
  onCancel: _propTypes["default"].func,

  /**
   * Label of the cancel button.
   */
  cancelLabel: _propTypes["default"].string,

  /**
   * Boolean indicating if clicking the overlay should close the overlay.
   */
  shouldCloseOnOverlayClick: _propTypes["default"].bool,

  /**
   * Boolean indicating if pressing the esc key should close the overlay.
   */
  shouldCloseOnEscapePress: _propTypes["default"].bool,

  /**
   * Width of the Dialog.
   */
  width: _propTypes["default"].oneOfType([_propTypes["default"].string, _propTypes["default"].number]),

  /**
   * The space above the dialog.
   * This offset is also used at the bottom when there is not enough vertical
   * space available on screen — and the dialog scrolls internally.
   */
  topOffset: _propTypes["default"].oneOfType([_propTypes["default"].string, _propTypes["default"].number]),

  /**
   * The space on the left/right sides of the dialog when there isn't enough
   * horizontal space available on screen.
   */
  sideOffset: _propTypes["default"].oneOfType([_propTypes["default"].string, _propTypes["default"].number]),

  /**
   * The min height of the body content.
   * Makes it less weird when only showing little content.
   */
  minHeightContent: _propTypes["default"].oneOfType([_propTypes["default"].string, _propTypes["default"].number]),

  /**
   * Props that are passed to the dialog container.
   */
  containerProps: _propTypes["default"].object,

  /**
   * Props that are passed to the content container.
   */
  contentContainerProps: _propTypes["default"].object,

  /**
   * Whether or not to prevent scrolling in the outer body
   */
  preventBodyScrolling: _propTypes["default"].bool,

  /**
   * Props that are passed to the Overlay component.
   */
  overlayProps: _propTypes["default"].object
});
(0, _defineProperty2["default"])(Dialog, "defaultProps", {
  isShown: false,
  hasHeader: true,
  hasClose: true,
  hasFooter: true,
  hasCancel: true,
  intent: 'none',
  width: 560,
  topOffset: '12vmin',
  sideOffset: '16px',
  minHeightContent: 80,
  confirmLabel: 'Confirm',
  isConfirmLoading: false,
  isConfirmDisabled: false,
  cancelLabel: 'Cancel',
  shouldCloseOnOverlayClick: true,
  shouldCloseOnEscapePress: true,
  onCancel: function onCancel(close) {
    return close();
  },
  onConfirm: function onConfirm(close) {
    return close();
  },
  preventBodyScrolling: false,
  overlayProps: {}
});

var _default = (0, _theme.withTheme)(Dialog);

exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9kaWFsb2cvc3JjL0RpYWxvZy5qcyJdLCJuYW1lcyI6WyJhbmltYXRpb25FYXNpbmciLCJkZWNlbGVyYXRpb24iLCJhY2NlbGVyYXRpb24iLCJBTklNQVRJT05fRFVSQVRJT04iLCJvcGVuQW5pbWF0aW9uIiwiY3NzIiwia2V5ZnJhbWVzIiwiZnJvbSIsInRyYW5zZm9ybSIsIm9wYWNpdHkiLCJ0byIsImNsb3NlQW5pbWF0aW9uIiwiYW5pbWF0aW9uU3R5bGVzIiwiYW5pbWF0aW9uIiwiRGlhbG9nIiwiY2xvc2UiLCJjaGlsZHJlbiIsInByb3BzIiwidGl0bGUiLCJ3aWR0aCIsImludGVudCIsImlzU2hvd24iLCJ0b3BPZmZzZXQiLCJzaWRlT2Zmc2V0IiwiaGFzSGVhZGVyIiwiaGVhZGVyIiwiaGFzQ2xvc2UiLCJoYXNGb290ZXIiLCJmb290ZXIiLCJoYXNDYW5jZWwiLCJvbkNsb3NlQ29tcGxldGUiLCJvbk9wZW5Db21wbGV0ZSIsIm9uQ2FuY2VsIiwib25Db25maXJtIiwiY29uZmlybUxhYmVsIiwiaXNDb25maXJtTG9hZGluZyIsImlzQ29uZmlybURpc2FibGVkIiwiY2FuY2VsTGFiZWwiLCJzaG91bGRDbG9zZU9uT3ZlcmxheUNsaWNrIiwic2hvdWxkQ2xvc2VPbkVzY2FwZVByZXNzIiwiY29udGFpbmVyUHJvcHMiLCJjb250ZW50Q29udGFpbmVyUHJvcHMiLCJtaW5IZWlnaHRDb250ZW50IiwicHJldmVudEJvZHlTY3JvbGxpbmciLCJvdmVybGF5UHJvcHMiLCJzaWRlT2Zmc2V0V2l0aFVuaXQiLCJOdW1iZXIiLCJpc0ludGVnZXIiLCJtYXhXaWR0aCIsInRvcE9mZnNldFdpdGhVbml0IiwibWF4SGVpZ2h0IiwicmVuZGVySGVhZGVyIiwidW5kZWZpbmVkIiwicmVuZGVyRm9vdGVyIiwiZGlzcGxheSIsImFsaWduSXRlbXMiLCJqdXN0aWZ5Q29udGVudCIsInN0YXRlIiwicmVuZGVyQ2hpbGRyZW4iLCJSZWFjdCIsIkNvbXBvbmVudCIsIlByb3BUeXBlcyIsIm9uZU9mVHlwZSIsIm5vZGUiLCJmdW5jIiwiaXNSZXF1aXJlZCIsIm9uZU9mIiwiYm9vbCIsImVsZW1lbnQiLCJzdHJpbmciLCJudW1iZXIiLCJvYmplY3QiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7Ozs7O0FBRUEsSUFBTUEsZUFBZSxHQUFHO0FBQ3RCQyxFQUFBQSxZQUFZLGtDQURVO0FBRXRCQyxFQUFBQSxZQUFZO0FBRlUsQ0FBeEI7QUFLQSxJQUFNQyxrQkFBa0IsR0FBRyxHQUEzQjs7QUFFQSxJQUFNQyxhQUFhLEdBQUdDLFlBQUlDLFNBQUosQ0FBYyxlQUFkLEVBQStCO0FBQ25EQyxFQUFBQSxJQUFJLEVBQUU7QUFDSkMsSUFBQUEsU0FBUyxFQUFFLFlBRFA7QUFFSkMsSUFBQUEsT0FBTyxFQUFFO0FBRkwsR0FENkM7QUFLbkRDLEVBQUFBLEVBQUUsRUFBRTtBQUNGRixJQUFBQSxTQUFTLEVBQUUsVUFEVDtBQUVGQyxJQUFBQSxPQUFPLEVBQUU7QUFGUDtBQUwrQyxDQUEvQixDQUF0Qjs7QUFXQSxJQUFNRSxjQUFjLEdBQUdOLFlBQUlDLFNBQUosQ0FBYyxnQkFBZCxFQUFnQztBQUNyREMsRUFBQUEsSUFBSSxFQUFFO0FBQ0pDLElBQUFBLFNBQVMsRUFBRSxVQURQO0FBRUpDLElBQUFBLE9BQU8sRUFBRTtBQUZMLEdBRCtDO0FBS3JEQyxFQUFBQSxFQUFFLEVBQUU7QUFDRkYsSUFBQUEsU0FBUyxFQUFFLFlBRFQ7QUFFRkMsSUFBQUEsT0FBTyxFQUFFO0FBRlA7QUFMaUQsQ0FBaEMsQ0FBdkI7O0FBV0EsSUFBTUcsZUFBZSxHQUFHO0FBQ3RCLHVEQUFxRDtBQUNuREMsSUFBQUEsU0FBUyxZQUFLVCxhQUFMLGNBQXNCRCxrQkFBdEIsZ0JBQThDSCxlQUFlLENBQUNDLFlBQTlEO0FBRDBDLEdBRC9CO0FBSXRCLDZCQUEyQjtBQUN6QlksSUFBQUEs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dCBSZWFjdCBmcm9tICdyZWFjdCdcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcydcbmltcG9ydCB7IFBhbmUgfSBmcm9tICcuLi8uLi9sYXllcnMnXG5pbXBvcnQgeyBQYXJhZ3JhcGgsIEhlYWRpbmcgfSBmcm9tICcuLi8uLi90eXBvZ3JhcGh5J1xuaW1wb3J0IHsgT3ZlcmxheSB9IGZyb20gJy4uLy4uL292ZXJsYXknXG5pbXBvcnQgeyBCdXR0b24sIEljb25CdXR0b24gfSBmcm9tICcuLi8uLi9idXR0b25zJ1xuaW1wb3J0IHsgd2l0aFRoZW1lIH0gZnJvbSAnLi4vLi4vdGhlbWUnXG5cbmNvbnN0IGFuaW1hdGlvbkVhc2luZyA9IHtcbiAgZGVjZWxlcmF0aW9uOiBgY3ViaWMtYmV6aWVyKDAuMCwgMC4wLCAwLjIsIDEpYCxcbiAgYWNjZWxlcmF0aW9uOiBgY3ViaWMtYmV6aWVyKDAuNCwgMC4wLCAxLCAxKWBcbn1cblxuY29uc3QgQU5JTUFUSU9OX0RVUkFUSU9OID0gMjAwXG5cbmNvbnN0IG9wZW5BbmltYXRpb24gPSBjc3Mua2V5ZnJhbWVzKCdvcGVuQW5pbWF0aW9uJywge1xuICBmcm9tOiB7XG4gICAgdHJhbnNmb3JtOiAnc2NhbGUoMC44KScsXG4gICAgb3BhY2l0eTogMFxuICB9LFxuICB0bzoge1xuICAgIHRyYW5zZm9ybTogJ3NjYWxlKDEpJyxcbiAgICBvcGFjaXR5OiAxXG4gIH1cbn0pXG5cbmNvbnN0IGNsb3NlQW5pbWF0aW9uID0gY3NzLmtleWZyYW1lcygnY2xvc2VBbmltYXRpb24nLCB7XG4gIGZyb206IHtcbiAgICB0cmFuc2Zvcm06ICdzY2FsZSgxKScsXG4gICAgb3BhY2l0eTogMVxuICB9LFxuICB0bzoge1xuICAgIHRyYW5zZm9ybTogJ3NjYWxlKDAuOCknLFxuICAgIG9wYWNpdHk6IDBcbiAgfVxufSlcblxuY29uc3QgYW5pbWF0aW9uU3R5bGVzID0ge1xuICAnJltkYXRhLXN0YXRlPVwiZW50ZXJpbmdcIl0sICZbZGF0YS1zdGF0ZT1cImVudGVyZWRcIl0nOiB7XG4gICAgYW5pbWF0aW9uOiBgJHtvcGVuQW5pbWF0aW9ufSAke0FOSU1BVElPTl9EVVJBVElPTn1tcyAke2FuaW1hdGlvbkVhc2luZy5kZWNlbGVyYXRpb259IGJvdGhgXG4gIH0sXG4gICcmW2RhdGEtc3RhdGU9XCJleGl0aW5nXCJdJzoge1xuICAgIGFuaW1hdGlvbjogYCR7Y2xvc2VBbmltYXRpb259ICR7QU5JTUFUSU9OX0RVUkFUSU9OfW1zICR7YW5pbWF0aW9uRWFzaW5nLmFjY2VsZXJhdGlvbn0gYm90aGBcbiAgfVxufVxuXG5jbGFzcyBEaWFsb2cgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgIC8qKlxuICAgICAqIENoaWxkcmVuIGNhbiBiZSBhIHN0cmluZywgbm9kZSBvciBhIGZ1bmN0aW9uIGFjY2VwdGluZyBgKHsgY2xvc2UgfSlgLlxuICAgICAqIFdoZW4gcGFzc2luZyBhIHN0cmluZywgPFBhcmFncmFwaCAvPiBpcyB1c2VkIHRvIHdyYXAgdGhlIHN0cmluZy5cbiAgICAgKi9cbiAgICBjaGlsZHJlbjogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLm5vZGUsIFByb3BUeXBlcy5mdW5jXSkuaXNSZXF1aXJlZCxcblxuICAgIC8qKlxuICAgICAqIFRoZSBpbnRlbnQgb2YgdGhlIERpYWxvZy4gVXNlZCBmb3IgdGhlIGJ1dHRvbi5cbiAgICAgKi9cbiAgICBpbnRlbnQ6IFByb3BUeXBlcy5vbmVPZihbJ25vbmUnLCAnc3VjY2VzcycsICd3YXJuaW5nJywgJ2RhbmdlciddKVxuICAgICAgLmlzUmVxdWlyZWQsXG5cbiAgICAvKipcbiAgICAgKiBXaGVuIHRydWUsIHRoZSBkaWFsb2cgaXMgc2hvd24uXG4gICAgICovXG4gICAgaXNTaG93bjogUHJvcFR5cGVzLmJvb2wsXG5cbiAgICAvKipcbiAgICAgKiBUaXRsZSBvZiB0aGUgRGlhbG9nLiBUaXRsZXMgc2hvdWxkIHVzZSBUaXRsZSBDYXNlLlxuICAgICAqL1xuICAgIHRpdGxlOiBQcm9wVHlwZXMubm9kZSxcblxuICAgIC8qKlxuICAgICAqIFdoZW4gdHJ1ZSwgdGhlIGhlYWRlciB3aXRoIHRoZSB0aXRsZSBhbmQgY2xvc2UgaWNvbiBidXR0b24gaXMgc2hvd24uXG4gICAgICovXG4gICAgaGFzSGVhZGVyOiBQcm9wVHlwZXMuYm9vbCxcblxuICAgIC8qKlxuICAgICAqIEEgY3VzdG9tIGhlYWRlciB0byByZW5kZXIgYXQgdGhlIHRvcCBvZiB0aGUgRGlhbG9nLiBJZiBzZXQsIHRoaXNcbiAgICAgKiB0YWtlcyBwcmVjZWRlbmNlIG92ZXIgdGhlIGRlZmF1bHQgaGVhZGVyLlxuICAgICAqL1xuICAgIGhlYWRlcjogUHJvcFR5cGVzLmVsZW1lbnQsXG5cbiAgICAvKipcbiAgICAgKiBXaGVuIHRydWUsIHRoZSBmb290ZXIgd2l0aCB0aGUgY2FuY2VsIGFuZCBjb25maXJtIGJ1dHRvbiBpcyBzaG93bi5cbiAgICAgKi9cbiAgICBoYXNGb290ZXI6IFByb3BUeXBlcy5ib29sLFxuXG4gICAgLyoqXG4gICAgICogQSBjdXN0b20gZm9vdGVyIHRvIHJlbmRlciBhdCB0aGUgYm90dG9tIG9mIHRoZSBEaWFsb2cuIElmIHNldCwgdGhpc1xuICAgICAqIHRha2VzIHByZWNlZGVuY2Ugb3ZlciB0aGUgZGVmYXVsdCBmb290ZXIuXG4gICAgICovXG4gICAgZm9vdGVyOiBQcm9wVHlwZXMuZWxlbWVudCxcblxuICAgIC8qKlxuICAgICAqIFdoZW4gdHJ1ZSwgdGhlIGNhbmNlbCBidXR0b24gaXMgc2hvd24uXG4gICAgICovXG4gICAgaGFzQ2FuY2VsOiBQcm9wVHlwZXMuYm9vbCxcblxuICAgIC8qKlxuICAgICAqIFdoZW4gdHJ1ZSwgdGhlIGNsb3NlIGJ1dHRvbiBpcyBzaG93blxuICAgICAqL1xuICAgIGhhc0Nsb3NlOiBQcm9wVHlwZXMuYm9vbCxcblxuICAgIC8qKlxuICAgICAqIEZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBjYWxsZWQgd2hlbiB0aGUgZXhpdCB0cmFuc2l0aW9uIGlzIGNvbXBsZXRlLlxuICAgICAqL1xuICAgIG9uQ2xvc2VDb21wbGV0ZTogUHJvcFR5cGVzLmZ1bmMsXG5cbiAgICAvKipcbiAgICAgKiBGdW5jdGlvbiB0aGF0IHdpbGwgYmUgY2FsbGVkIHdoZW4gdGhlIGVudGVyIHRyYW5zaXRpb24gaXMgY29tcGxldGUuXG4gICAgICovXG4gICAgb25PcGVuQ29tcGxldGU6IFByb3BUeXBlcy5mdW5jLFxuXG4gICAgLyoqXG4gICAgICogRnVuY3Rpb24gdGhhdCB3aWxsIGJlIGNhbGxlZCB3aGVuIHRoZSBjb25maXJtIGJ1dHRvbiBpcyBjbGlja2VkLlxuICAgICAqIFRoaXMgZG9lcyBub3QgY2xvc2UgdGhlIERpYWxvZy4gQSBjbG9zZSBmdW5jdGlvbiB3aWxsIGJlIHBhc3NlZFxuICAgICAqIGFzIGEgcGFyYW1hdGVyIHlvdSBjYW4gdXNlIHRvIGNsb3NlIHRoZSBkaWFsb2cuXG4gICAgICpcbiAgICAgKiBgb25Db25maXJtPXsoY2xvc2UpID0+IGNsb3NlKCl9YFxuICAgICAqL1xuICAgIG9uQ29uZmlybTogUHJvcFR5cGVzLmZ1bmMsXG5cbiAgICAvKipcbiAgICAgKiBMYWJlbCBvZiB0aGUgY29uZmlybSBidXR0b24uXG4gICAgICovXG4gICAgY29uZmlybUxhYmVsOiBQcm9wVHlwZXMuc3RyaW5nLFxuXG4gICAgLyoqXG4gICAgICogV2hlbiB0cnVlLCB0aGUgY29uZmlybSBidXR0b24gaXMgc2V0IHRvIGxvYWRpbmcuXG4gICAgICovXG4gICAgaXNDb25maXJtTG9hZGluZzogUHJvcFR5cGVzLmJvb2wsXG5cbiAgICAvKipcbiAgICAgKiBXaGVuIHRydWUsIHRoZSBjb25maXJtIGJ1dHRvbiBpcyBzZXQgdG8gZGlzYWJsZWQuXG4gICAgICovXG4gICAgaXNDb25maXJtRGlzYWJsZWQ6IFByb3BUeXBlcy5ib29sLFxuXG4gICAgLyoqXG4gICAgICogRnVuY3Rpb24gdGhhdCB3aWxsIGJlIGNhbGxlZCB3aGVuIHRoZSBjYW5jZWwgYnV0dG9uIGlzIGNsaWNrZWQuXG4gICAgICogVGhpcyBjbG9zZXMgdGhlIERpYWxvZyBieSBkZWZhdWx0LlxuICAgICAqXG4gICAgICogYG9uQ2FuY2VsPXsoY2xvc2UpID0+IGNsb3NlKCl9YFxuICAgICAqL1xuICAgIG9uQ2FuY2VsOiBQcm9wVHlwZXMuZnVuYyxcblxuICAgIC8qKlxuICAgICAqIExhYmVsIG9mIHRoZSBjYW5jZWwgYnV0dG9uLlxuICAgICAqL1xuICAgIGNhbmNlbExhYmVsOiBQcm9wVHlwZXMuc3RyaW5nLFxuXG4gICAgLyoqXG4gICAgICogQm9vbGVhbiBpbmRpY2F0aW5nIGlmIGNsaWNraW5nIHRoZSBvdmVybGF5IHNob3VsZCBjbG9zZSB0aGUgb3ZlcmxheS5cbiAgICAgKi9cbiAgICBzaG91bGRDbG9zZU9uT3ZlcmxheUNsaWNrOiBQcm9wVHlwZXMuYm9vbCxcblxuICAgIC8qKlxuICAgICAqIEJvb2xlYW4gaW5kaWNhdGluZyBpZiBwcmVzc2luZyB0aGUgZXNjIGtleSBzaG91bGQgY2xvc2UgdGhlIG92ZXJsYXkuXG4gICAgICovXG4gICAgc2hvdWxkQ2xvc2VPbkVzY2FwZVByZXNzOiBQcm9wVHlwZXMuYm9vbCxcblxuICAgIC8qKlxuICAgICAqIFdpZHRoIG9mIHRoZSBEaWFsb2cuXG4gICAgICovXG4gICAgd2lkdGg6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5zdHJpbmcsIFByb3BUeXBlcy5udW1iZXJdKSxcblxuICAgIC8qKlxuICAgICAqIFRoZSBzcGFjZSBhYm92ZSB0aGUgZGlhbG9nLlxuICAgICAqIFRoaXMgb2Zmc2V0IGlzIGFsc28gdXNlZCBhdCB0aGUgYm90dG9tIHdoZW4gdGhlcmUgaXMgbm90IGVub3VnaCB2ZXJ0aWNhbFxuICAgICAqIHNwYWNlIGF2YWlsYWJsZSBvbiBzY3JlZW4g4oCUIGFuZCB0aGUgZGlhbG9nIHNjcm9sbHMgaW50ZXJuYWxseS5cbiAgICAgKi9cbiAgICB0b3BPZmZzZXQ6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5zdHJpbmcsIFByb3BUeXBlcy5udW1iZXJdKSxcblxuICAgIC8qKlxuICAgICAqIFRoZSBzcGFjZSBvbiB0aGUgbGVmdC9yaWdodCBzaWRlcyBvZiB0aGUgZGlhbG9nIHdoZW4gdGhlcmUgaXNuJ3QgZW5vdWdoXG4gICAgICogaG9yaXpvbnRhbCBzcGFjZSBhdmFpbGFibGUgb24gc2NyZWVuLlxuICAgICAqL1xuICAgIHNpZGVPZmZzZXQ6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5zdHJpbmcsIFByb3BUeXBlcy5udW1iZXJdKSxcblxuICAgIC8qKlxuICAgICAqIFRoZSBtaW4gaGVpZ2h0IG9mIHRoZSBib2R5IGNvbnRlbnQuXG4gICAgICogTWFrZXMgaXQgbGVzcyB3ZWlyZCB3aGVuIG9ubHkgc2hvd2luZyBsaXR0bGUgY29udGVudC5cbiAgICAgKi9cbiAgICBtaW5IZWlnaHRDb250ZW50OiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMuc3RyaW5nLCBQcm9wVHlwZXMubnVtYmVyXSksXG5cbiAgICAvKipcbiAgICAgKiBQcm9wcyB0aGF0IGFyZSBwYXNzZWQgdG8gdGhlIGRpYWxvZyBjb250YWluZXIuXG4gICAgICovXG4gICAgY29udGFpbmVyUHJvcHM6IFByb3BUeXBlcy5vYmplY3QsXG5cbiAgICAvKipcbiAgICAgKiBQcm9wcyB0aGF0IGFyZSBwYXNzZWQgdG8gdGhlIGNvbnRlbnQgY29udGFpbmVyLlxuICAgICAqL1xuICAgIGNvbnRlbnRDb250YWluZXJQcm9wczogUHJvcFR5cGVzLm9iamVjdCxcblxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgb3Igbm90IHRvIHByZXZlbnQgc2Nyb2xsaW5nIGluIHRoZSBvdXRlciBib2R5XG4gICAgICovXG4gICAgcHJldmVudEJvZHlTY3JvbGxpbmc6IFByb3BUeXBlcy5ib29sLFxuXG4gICAgLyoqXG4gICAgICogUHJvcHMgdGhhdCBhcmUgcGFzc2VkIHRvIHRoZSBPdmVybGF5IGNvbXBvbmVudC5cbiAgICAgKi9cbiAgICBvdmVybGF5UHJvcHM6IFByb3BUeXBlcy5vYmplY3RcbiAgfVxuXG4gIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgaXNTaG93bjogZmFsc2UsXG4gICAgaGFzSGVhZGVyOiB0cnVlLFxuICAgIGhhc0Nsb3NlOiB0cnVlLFxuICAgIGhhc0Zvb3RlcjogdHJ1ZSxcbiAgICBoYXNDYW5jZWw6IHRydWUsXG4gICAgaW50ZW50OiAnbm9uZScsXG4gICAgd2lkdGg6IDU2MCxcbiAgICB0b3BPZmZzZXQ6ICcxMnZtaW4nLFxuICAgIHNpZGVPZmZzZXQ6ICcxNnB4JyxcbiAgICBtaW5IZWlnaHRDb250ZW50OiA4MCxcbiAgICBjb25maXJtTGFiZWw6ICdDb25maXJtJyxcbiAgICBpc0NvbmZpcm1Mb2FkaW5nOiBmYWxzZSxcbiAgICBpc0NvbmZpcm1EaXNhYmxlZDogZmFsc2UsXG4gICAgY2FuY2VsTGFiZWw6ICdDYW5jZWwnLFxuICAgIHNob3VsZENsb3NlT25PdmVybGF5Q2xpY2s6IHRydWUsXG4gICAgc2hvdWxkQ2xvc2VPbkVzY2FwZVByZXNzOiB0cnVlLFxuICAgIG9uQ2FuY2VsOiBjbG9zZSA9PiBjbG9zZSgpLFxuICAgIG9uQ29uZmlybTogY2xvc2UgPT4gY2xvc2UoKSxcbiAgICBwcmV2ZW50Qm9keVNjcm9sbGluZzogZmFsc2UsXG4gICAgb3ZlcmxheVByb3BzOiB7fVxuICB9XG5cbiAgcmVuZGVyQ2hpbGRyZW4gPSBjbG9zZSA9PiB7XG4gICAgY29uc3QgeyBjaGlsZHJlbiB9ID0gdGhpcy5wcm9wc1xuXG4gICAgaWYgKHR5cGVvZiBjaGlsZHJlbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIGNoaWxkcmVuKHsgY2xvc2UgfSlcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGNoaWxkcmVuID09PSAnc3RyaW5nJykge1xuICAgICAgcmV0dXJuIDxQYXJhZ3JhcGg+e2NoaWxkcmVufTwvUGFyYWdyYXBoPlxuICAgIH1cblxuICAgIHJldHVybiBjaGlsZHJlblxuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHtcbiAgICAgIHRpdGxlLFxuICAgICAgd2lkdGgsXG4gICAgICBpbnRlbnQsXG4gICAgICBpc1Nob3duLFxuICAgICAgdG9wT2Zmc2V0LFxuICAgICAgc2lkZU9mZnNldCxcbiAgICAgIGhhc0hlYWRlcixcbiAgICAgIGhlYWRlcixcbiAgICAgIGhhc0Nsb3NlLFxuICAgICAgaGFzRm9vdGVyLFxuICAgICAgZm9vdGVyLFxuICAgICAgaGFzQ2FuY2VsLFxuICAgICAgb25DbG9zZUNvbXBsZXRlLFxuICAgICAgb25PcGVuQ29tcGxldGUsXG4gICAgICBvbkNhbmNlbCxcbiAgICAgIG9uQ29uZmlybSxcbiAgICAgIGNvbmZpcm1MYWJlbCxcbiAgICAgIGlzQ29uZmlybUxvYWRpbmcsXG4gICAgICBpc0NvbmZpcm1EaXNhYmxlZCxcbiAgICAgIGNhbmNlbExhYmVsLFxuICAgICAgc2hvdWxkQ2xvc2VPbk92ZXJsYXlDbGljayxcbiAgICAgIHNob3VsZENsb3NlT25Fc2NhcGVQcmVzcyxcbiAgICAgIGNvbnRhaW5lclByb3BzID0ge30sXG4gICAgICBjb250ZW50Q29udGFpbmVyUHJvcHMsXG4gICAgICBtaW5IZWlnaHRDb250ZW50LFxuICAgICAgcHJldmVudEJvZHlTY3JvbGxpbmcsXG4gICAgICBvdmVybGF5UHJvcHNcbiAgICB9ID0gdGhpcy5wcm9wc1xuXG4gICAgY29uc3Qgc2lkZU9mZnNldFdpdGhVbml0ID0gTnVtYmVyLmlzSW50ZWdlcihzaWRlT2Zmc2V0KVxuICAgICAgPyBgJHtzaWRlT2Zmc2V0fXB4YFxuICAgICAgOiBzaWRlT2Zmc2V0XG4gICAgY29uc3QgbWF4V2lkdGggPSBgY2FsYygxMDAlIC0gJHtzaWRlT2Zmc2V0V2l0aFVuaXR9ICogMilgXG5cbiAgICBjb25zdCB0b3BPZmZzZXRXaXRoVW5pdCA9IE51bWJlci5pc0ludGVnZXIodG9wT2Zmc2V0KVxuICAgICAgPyBgJHt0b3BPZmZzZXR9cHhgXG4gICAgICA6IHRvcE9mZnNldFxuICAgIGNvbnN0IG1heEhlaWdodCA9IGBjYWxjKDEwMCUgLSAke3RvcE9mZnNldFdpdGhVbml0fSAqIDIpYFxuXG4gICAgY29uc3QgcmVuZGVySGVhZGVyID0gY2xvc2UgPT4ge1xuICAgICAgaWYgKCFoZWFkZXIgJiYgIWhhc0hlYWRlcikge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgICB9XG5cbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxQYW5lXG4gICAgICAgICAgcGFkZGluZz17MTZ9XG4gICAgICAgICAgZmxleFNocmluaz17MH1cbiAgICAgICAgICBib3JkZXJCb3R0b209XCJtdXRlZFwiXG4gICAgICAgICAgZGlzcGxheT1cImZsZXhcIlxuICAgICAgICAgIGFsaWduSXRlbXM9XCJjZW50ZXJcIlxuICAgICAgICA+XG4gICAgICAgICAge2hlYWRlciB8fCAoXG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICA8SGVhZGluZyBpcz1cImg0XCIgc2l6ZT17NjAwfSBmbGV4PVwiMVwiPlxuICAgICAgICAgICAgICAgIHt0aXRsZX1cbiAgICAgICAgICAgICAgPC9IZWFkaW5nPlxuICAgICAgICAgICAgICB7aGFzQ2xvc2UgJiYgKFxuICAgICAgICAgICAgICAgIDxJY29uQnV0dG9uXG4gICAgICAgICAgICAgICAgICBhcHBlYXJhbmNlPVwibWluaW1hbFwiXG4gICAgICAgICAgICAgICAgICBpY29uPVwiY3Jvc3NcIlxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gb25DYW5jZWwoY2xvc2UpfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8Lz5cbiAgICAgICAgICApfVxuICAgICAgICA8L1BhbmU+XG4gICAgICApXG4gICAgfVxuXG4gICAgY29uc3QgcmVuZGVyRm9vdGVyID0gY2xvc2UgPT4ge1xuICAgICAgaWYgKCFmb290ZXIgJiYgIWhhc0Zvb3Rlcikge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgICB9XG5cbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxQYW5lIGJvcmRlclRvcD1cIm11dGVkXCIgY2xlYXJmaXg+XG4gICAgICAgICAgPFBhbmUgcGFkZGluZz17MTZ9IGZsb2F0PVwicmlnaHRcIj5cbiAgICAgICAgICAgIHtmb290ZXIgfHwgKFxuICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIHsvKiBDYW5jZWwgc2hvdWxkIGJlIGZpcnN0IHRvIG1ha2Ugc3VyZSBmb2N1cyBnZXRzIG9uIGl0IGZpcnN0LiAqL31cbiAgICAgICAgICAgICAgICB7aGFzQ2FuY2VsICYmIChcbiAgICAgICAgICAgICAgICAgIDxCdXR0b24gdGFiSW5kZXg9ezB9IG9uQ2xpY2s9eygpID0+IG9uQ2FuY2VsKGNsb3NlKX0+XG4gICAgICAgICAgICAgICAgICAgIHtjYW5jZWxMYWJlbH1cbiAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICl9XG5cbiAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICB0YWJJbmRleD17MH1cbiAgICAgICAgICAgICAgICAgIG1hcmdpbkxlZnQ9ezh9XG4gICAgICAgICAgICAgICAgICBhcHBlYXJhbmNlPVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgICBpc0xvYWRpbmc9e2lzQ29uZmlybUxvYWRpbmd9XG4gICAgICAgICAgICAgICAgICBkaXNhYmxlZD17aXNDb25maXJtRGlzYWJsZWR9XG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBvbkNvbmZpcm0oY2xvc2UpfVxuICAgICAgICAgICAgICAgICAgaW50ZW50PXtpbnRlbnR9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAge2NvbmZpcm1MYWJlbH1cbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvUGFuZT5cbiAgICAgICAgPC9QYW5lPlxuICAgICAgKVxuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICA8T3ZlcmxheVxuICAgICAgICBpc1Nob3duPXtpc1Nob3dufVxuICAgICAgICBzaG91bGRDbG9zZU9uQ2xpY2s9e3Nob3VsZENsb3NlT25PdmVybGF5Q2xpY2t9XG4gICAgICAgIHNob3VsZENsb3NlT25Fc2NhcGVQcmVzcz17c2hvdWxkQ2xvc2VPbkVzY2FwZVByZXNzfVxuICAgICAgICBvbkV4aXRlZD17b25DbG9zZUNvbXBsZXRlfVxuICAgICAgICBvbkVudGVyZWQ9e29uT3BlbkNvbXBsZXRlfVxuICAgICAgICBjb250YWluZXJQcm9wcz17e1xuICAgICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICAgICBhbGlnbkl0ZW1zOiAnZmxleC1zdGFydCcsXG4gICAgICAgICAganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLFxuICAgICAgICAgIC4uLm92ZXJsYXlQcm9wc1xuICAgICAgICB9fVxuICAgICAgICBwcmV2ZW50Qm9keVNjcm9sbGluZz17cHJldmVudEJvZHlTY3JvbGxpbmd9XG4gICAgICA+XG4gICAgICAgIHsoeyBzdGF0ZSwgY2xvc2UgfSkgPT4gKFxuICAgICAgICAgIDxQYW5lXG4gICAgICAgICAgICByb2xlPVwiZGlhbG9nXCJcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcj1cIndoaXRlXCJcbiAgICAgICAgICAgIGVsZXZhdGlvbj17NH1cbiAgICAgICAgICAgIGJvcmRlclJhZGl1cz17OH1cbiAgICAgICAgICAgIHdpZHRoPXt3aWR0aH1cbiAgICAgICAgICAgIG1heFdpZHRoPXttYXhXaWR0aH1cbiAgICAgICAgICAgIG1heEhlaWdodD17bWF4SGVpZ2h0fVxuICAgICAgICAgICAgbWFyZ2luWD17c2lkZU9mZnNldFdpdGhVbml0fVxuICAgICAgICAgICAgbWFyZ2luWT17dG9wT2Zmc2V0V2l0aFVuaXR9XG4gICAgICAgICAgICBkaXNwbGF5PVwiZmxleFwiXG4gICAgICAgICAgICBmbGV4RGlyZWN0aW9uPVwiY29sdW1uXCJcbiAgICAgICAgICAgIGNzcz17YW5pbWF0aW9uU3R5bGVzfVxuICAgICAgICAgICAgZGF0YS1zdGF0ZT17c3RhdGV9XG4gICAgICAgICAgICB7Li4uY29udGFpbmVyUHJvcHN9XG4gICAgICAgICAgPlxuICAgICAgICAgICAge3JlbmRlckhlYWRlcihjbG9zZSl9XG5cbiAgICAgICAgICAgIDxQYW5lXG4gICAgICAgICAgICAgIGRhdGEtc3RhdGU9e3N0YXRlfVxuICAgICAgICAgICAgICBkaXNwbGF5PVwiZmxleFwiXG4gICAgICAgICAgICAgIG92ZXJmbG93PVwiYXV0b1wiXG4gICAgICAgICAgICAgIHBhZGRpbmc9ezE2fVxuICAgICAgICAgICAgICBmbGV4RGlyZWN0aW9uPVwiY29sdW1uXCJcbiAgICAgICAgICAgICAgbWluSGVpZ2h0PXttaW5IZWlnaHRDb250ZW50fVxuICAgICAgICAgICAgICB7Li4uY29udGVudENvbnRhaW5lclByb3BzfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8UGFuZT57dGhpcy5yZW5kZXJDaGlsZHJlbihjbG9zZSl9PC9QYW5lPlxuICAgICAgICAgICAgPC9QYW5lPlxuXG4gICAgICAgICAgICB7cmVuZGVyRm9vdGVyKGNsb3NlKX1cbiAgICAgICAgICA8L1BhbmU+XG4gICAgICAgICl9XG4gICAgICA8L092ZXJsYXk+XG4gICAgKVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IHdpdGhUaGVtZShEaWFsb2cpXG4iXX0=